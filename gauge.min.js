function SVGElement(a){a=a||{};var b=document.createElementNS(this.NS,"svg");b.style.width=a.width||"400px",b.style.height=a.height||"400px";var c=a.appendTo||document.getElementsByTagName("body")[0];c.appendChild(b),this.element=b}function Gauge(a){a=a||{},this.height=a.height||400,this.width=a.width||600,this.start=a.start||0,this.end=a.end||1,this.center=[this.width/2,"undefined"==typeof a.vOffset?this.height/2:this.height-a.vOffset],this.aperture=(a.aperture||210)*Math.PI/180,this.radius=a.radius||.3*this.width,this.appendTo=a.appendTo||document.getElementsByTagName("body")[0],this.segments=a.segments||[{start:this.start,end:this.end}],this.markers=a.markers||[this.start,this.end],this.scaleStyle=a.scaleStyle||"outside",this.render(),this.setValue(this.start)}SVGElement.prototype={NS:"http://www.w3.org/2000/svg",appendShape:function(a,b){b=b||{};var c=document.createElementNS(this.NS,a);for(var d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return this.element.appendChild(c),c}},Gauge.prototype={setValue:function(a){this.needle.setAttribute("transform","rotate("+this.rescale(a)/Math.PI*180+" "+this.center.join(" ")+")")},polarToRectangular:function(a,b,c){return[Math.round(a[0]+b*Math.cos(c)),Math.round(a[1]+b*Math.sin(c))]},appendArc:function(a){var b=this.polarToRectangular(a.center,a.r,a.start),c=this.polarToRectangular(a.center,a.r,a.end),d=a.end-a.start>Math.PI?"1":"0",e="M"+b.join(",")+" A"+a.r+","+a.r+" 0 "+d+",1 "+c.join(",");this.svgElement.appendShape("path",{d:e,"class":a["class"]})},rescale:function(a){return((a-this.start)/(this.end-this.start)-.5)*this.aperture+1.5*Math.PI},render:function(){var a;for(this.svgElement=new SVGElement({appendTo:this.appendTo,width:""+this.width+"px",height:""+this.height+"px"}),a=0;a<this.segments.length;a++)this.appendArc({center:this.center,start:this.rescale(this.segments[a].start),end:this.rescale(this.segments[a].end),r:this.radius,"class":"gauge "+this.segments[a].style||""});for(a=0;a<this.markers.length;a++){var b,c,d;"number"==typeof this.markers[a]?(b=c=this.markers[a],d=!0):(b=this.markers[a].value,c=this.markers[a].label,d=this.markers[a].tick);var e=this.rescale(b),f="inside"===this.scaleStyle?-1:1;if(d){var g=this.polarToRectangular(this.center,this.radius*(1+.025*f),e),h=this.polarToRectangular(this.center,this.radius*(1+.05*f),e);this.svgElement.appendShape("path",{d:"M"+g.join(",")+" L"+h.join(","),"class":"marker"})}var i=this.polarToRectangular(this.center,this.radius*(1+.075*f),e),j=e<1.4*Math.PI?0:e<1.6*Math.PI?1:2;"inside"===this.scaleStyle&&(j=2-j),j=["text-anchor: end;","text-anchor: middle;","text-anchor: start;"][j],this.svgElement.appendShape("text",{x:i[0],y:i[1],"class":"label",style:j+("inside"===this.scaleStyle?" dominant-baseline: hanging;":"")}).innerHTML=c}this.needle=this.svgElement.appendShape("polygon",{"class":"needle",points:""+this.center[0]+" "+(this.center[1]-.025*this.radius)+" "+this.center[0]+" "+(this.center[1]+.025*this.radius)+" "+(this.center[0]+1.05*this.radius)+" "+this.center[1]}),this.svgElement.appendShape("circle",{cx:this.center[0],cy:this.center[1],r:.05*this.radius,"class":"needle"})}};